(self.webpackChunksketchfab=self.webpackChunksketchfab||[]).push([[6693],{ahFU:t=>{var e={ApiCoreVersion:"1_0",start:"-",stop:"-",load:"-",gotoAnnotation:"-",getAnnotationList:"-",lookat:"-",setFov:"-",getCurrentTime:"-",play:"-",pause:"-",seekTo:"-",getAnimations:"-",setCurrentAnimationByUID:"-",setCycleMode:"-",setSpeed:"-",getSceneGraph:"-",getNodeMap:"-",getMatrix:"-",setMatrix:"-",hide:"-",show:"-",translate:"-",rotate:"-",getRootMatrixNode:"-",getCameraLookAt:"-",setCameraLookAt:"-",getScreenShot:"-",getMaterialList:"-",getTextureList:"-",addTexture:"-",updateTexture:"-",setTextureQuality:"-",setMaterial:"-",setPostProcessing:"-",getPostProcessing:"-"},o=Object.assign({},e,{getWorldToScreenCoordinates:"-"}),n=Object.assign({},o,{ApiCoreVersion:"1_2",pickColor:"-",setListenerOptions:"-",unselectAnnotation:"-"}),a=Object.assign({},n,{ApiCoreVersion:"1_3",setCameraEasing:"-",showAnnotation:"-",hideAnnotation:"-",getAnnotation:"-",updateAnnotation:"-",createAnnotation:"-",removeAnnotation:"-",pickFromScene:"-",pickFromScreen:"-",addVideoTexture:"-",translate:"-",rotate:"-"}),i=Object.assign({},a,{}),r=Object.assign({},i,{ApiCoreVersion:"1_4",getEnvironment:"-",getLight:"-",getFov:"-",getRootMatrixNode:"-",getShadingStyle:"-",getWireframe:"-",setCurrentAnimationByUID:"-",setEnvironment:"-",setLight:"-",setShadingStyle:"-",setWireframe:"-"}),s=Object.assign({},r,{ApiCoreVersion:"1_5",setAnnotationsTexture:"-",addVideoTexture:"-",gotoAnnotation:"-",setBackground:"-",getBackgroundList:"-",setEnvironment:"-",getEnvironmentList:"-",setCycleMode:"-"}),l=Object.assign({},s,{}),u=Object.assign({},l,{mouseMove:"-",mouseDown:"-",mouseUp:"-",mouseClick:"-",mouseDblClick:"-",mouseWheel:"-",startRecord:"-",endRecord:"-"}),c=Object.assign({},u,{ApiCoreVersion:"1_6",createAnnotationFromScenePosition:"-",createAnnotationFromWorldPosition:"-",getAnimations:"-",hideAnnotationTooltip:"-",removeAllAnnotations:"-",setCameraConstraints:"-",setEnableCameraConstraints:"-",setAnnotationCameraTransition:"-",showAnnotationTooltip:"-",recenterCamera:"-",setUserInteraction:"-"}),d=Object.assign({},c,{ApiCoreVersion:"1_7",setUVOffset:"-",setUVRotation:"-",setUVScale:"-",refreshCanvas:"-",refreshDraw:"-",setHighlightOptions:"-",highlightMaterial:"-"}),p=Object.assign({},d,{setEnableCameraConstraints:"-"}),h=Object.assign({},p,{ApiCoreVersion:"1_8",isLightFeatureEnabled:"-",startAR:"-",hide:"-",focusOnVisibleGeometries:"-",setCameraLookAtEndAnimationCallback:"-",setEnableCameraConstraints:"-",setLightFeatureEnabled:"-",setSpeed:"-",show:"-"}),g=Object.assign({},h,{createAnnotationFromWorldPosition:"-",createAnnotationFromScenePosition:"-",hideAnnotationTooltip:"-",showAnnotationTooltip:"-",hideAnnotationTooltips:"-",showAnnotationTooltips:"-"}),m=Object.assign({},g,{hideAnnotationTooltip:"-",showAnnotationTooltip:"-",hideAnnotationTooltips:"-",showAnnotationTooltips:"-"}),f=Object.assign({},m,{ApiCoreVersion:"1_9",hideAnnotationTooltip:"-",showAnnotationTooltip:"-",hideAnnotationTooltips:"-",removeTexture:"-"}),v=Object.assign({},f,{ApiCoreVersion:"1_10",createMaterial:"-",assignMaterial:"-",createDecal:"-",destroyDecal:"-",pickFromTextureCoordinates:"-",findDecalFromWorldPosition:"-"}),_=Object.assign({},v,{pickFromTextureCoordinates:"-",findDecalFromWorldPosition:"-"});t.exports={"1.0.0":e,"1.0.1":e,"1.0.2":e,"1.0.3":e,"1.1.0":o,"1.2.0":n,"1.2.1":n,"1.3.0":a,"1.3.1":i,"1.4.0":r,"1.4.1":r,"1.4.2":r,"1.5.0":s,"1.5.1":l,"1.5.2":u,"1.6.0":c,"1.7.0":d,"1.7.1":p,"1.8.0":h,"1.8.1":g,"1.8.2":m,"1.9.0":f,"1.10.0":v,"1.10.1":_}},"P/S1":(t,e,o)=>{"use strict";o.d(e,{Z:()=>Lt});var n=o("OGrQ"),a=o("ahFU"),i=o.n(a),r=o("lZH+"),s=o.n(r);const l=function(){return{_viewer:void 0,version:"0.2",initialize:function(t,e){this._viewer=t,this._uid=e;var o=this;window.addEventListener("message",(function(t){if(t.data&&t.data.command){var e=t.data;"initialize"!==e.command&&Object.prototype.hasOwnProperty.call(o,e.command)&&o[e.command].call(o,e)}}),!1)},ready:function(){this.answer({status:"load"})},clientReady:function(){return s().resolve()},answer:function(t){t.source=this._uid,void 0!==window.parent&&window.parent.postMessage(t,"*")},start:function(){this._viewer.start(),this.answer({status:"start"})},stop:function(){this._viewer.stop(),this.answer({status:"stop"})},lookat:function(t){this._viewer.lookat&&(this._viewer.lookat(t.eye,t.target,t.duration),window.setTimeout(function(){this.answer({status:"lookat"})}.bind(this),1e3*t.duration),this.answer({status:"lookat start"}))},autospin:function(t){!1===t&&(t=0),this.answer({status:"autospin"})},getViewerAPI:function(){}}};var u=o("A+FI"),c=o("xVFn"),d=o("iEQ1"),p=u.Z.osg,h=function(){p.NodeVisitor.apply(this,arguments),this.reset()};p.createPrototypeObject(h,p.objectInherit(p.NodeVisitor.prototype,{reset:function(){this._nodes=[],this._nodeMap={},this._nodeList={},this._dirty=!0},isDirty:function(){return this._dirty},getRootNode:function(){return this._nodes[0]},getRealNodeMap:function(){return this._nodeList},getRepresentationNodeMap:function(){return this._nodeMap},createNodeEntry:function(t){this._dirty=!1;var e=t.getInstanceID();this._nodeList[e]||(this._nodeList[e]=t);var o={name:t.getName(),instanceID:e,nodeMask:t.getNodeMask()};return this._nodeMap[e]||(this._nodeMap[e]=o),o},applyNode:function(t){var e=this._nodes;this._nodes=[],this.traverse(t);var o=this.createNodeEntry(t);o.children=this._nodes,o.type="Group",e.push(o),this._nodes=e},applyMatrixTransform:function(t){var e=this._nodes;this._nodes=[],this.traverse(t);var o=this.createNodeEntry(t);o.children=this._nodes,o.type="MatrixTransform",o.localMatrix=p.mat4.clone(t.getMatrix()),o.worldMatrix=t.getWorldMatrices()[0],e.push(o),this._nodes=e},applyGeometry:function(t){var e=this._nodes;this._nodes=[],this.traverse(t);var o=this.createNodeEntry(t);o.type=t.className(),e.push(o),this._nodes=e},apply:function(t){var e=t.getTypeID();e===p.Node.typeID?this.applyNode(t):e===p.MatrixTransform.typeID?this.applyMatrixTransform(t):t instanceof p.Geometry?this.applyGeometry(t):this.traverse(t)}}));const g=h;var m=o("v3Rt"),f=o("xF8r");function v(){this.handlers=[],this.events=[]}v.prototype={subscribe:function(t){this.events.forEach((function(e){t(e.name,e.args)}));var e=this.handlers.push(t);return function(){this.handlers.split(e-1,1)}},emit:function(t,e){this.events.push({name:t,args:e}),this.handlers.forEach((function(o){o(t,e)}))}};const _=v;var y=u.Z.osg,b=function(t){this._translateUpdateCallbackListPerNode={},this._rotateUpdateCallbackListPerNode={},this._nodeList=t};b.prototype={addTranslateUpdateCallback:function(t,e,o){var n=this._translateUpdateCallbackListPerNode[o];n&&(y.mat4.setTranslation(t.getMatrix(),n._target),e._source=n._target),this._translateUpdateCallbackListPerNode[o]=e},addRotateUpdateCallback:function(t,e,o){var n=this._rotateUpdateCallbackListPerNode[o];if(n){var a=n._target,i=y.mat4.create(),r=y.vec3.create();y.mat4.fromQuat(i,a),y.mat4.getTranslation(r,t.getMatrix()),y.mat4.setTranslation(i,r),y.mat4.copy(t.getMatrix(),i),e._source=n._target}this._rotateUpdateCallbackListPerNode[o]=e},removeTranslateUpdateCallback:function(t){delete this._translateUpdateCallbackListPerNode[t]},removeRotateUpdateCallback:function(t){delete this._rotateUpdateCallbackListPerNode[t]},update:function(t,e){var o,n,a;for(n in this._rotateUpdateCallbackListPerNode)o=this._rotateUpdateCallbackListPerNode[n],a=this._nodeList[n],o.update(a,e);for(n in this._translateUpdateCallbackListPerNode)o=this._translateUpdateCallbackListPerNode[n],a=this._nodeList[n],o.update(a,e);return!0}};var w=function(t,e,o,n,a){this._source=t,this._target=e,this._duration=o,this._started=-1,this._easing=n,this._finished=!1,this._callback=a};w.prototype={isFinished:function(){return this._finished},update:function(t,e){if(this._finished)return!0;f.Z.redrawShadow();var o=e.getFrameStamp().getSimulationTime();this._started<0&&(this._started=o);var n=(o-this._started)/this._duration;return n>1&&(this._finished=!0,this._callback&&this._callback(this._result),n=1),this._easing&&(n=this._easing(n)),this.interpolate(n,t),!0}};var M=function(t,e,o,n,a){w.call(this,t,e,o,n,a),this._result=y.vec3.create()};M.prototype=y.objectInherit(w.prototype,{interpolate:function(t,e){y.vec3.lerp(this._result,this._source,this._target,t),y.mat4.setTranslation(e.getMatrix(),this._result),e.dirtyBound()}});var k=function(t,e,o,n,a){w.call(this,t,e,o,n,a),this._result=y.quat.create(),this._translate=y.vec3.create(),this._finalResult=y.mat4.create()};k.prototype=y.objectInherit(w.prototype,{interpolate:function(t,e){y.quat.slerp(this._result,this._source,this._target,t),y.mat4.getTranslation(this._translate,e.getMatrix()),y.mat4.fromQuat(this._finalResult,this._result),y.mat4.setTranslation(this._finalResult,this._translate),y.mat4.copy(e.getMatrix(),this._finalResult),e.dirtyBound()}});var C,F,S=o("Bkvy"),x=o("BlrD"),I=u.Z.osg,L=u.Z.osgAnimation,T=function(t){this._partial=t,this._events={},this._replayEmitter=new _,this._partial.on("model-loaded",function(){this._emitEvents()}.bind(this)),this._sceneGraphVisitor=new g,this._nodeMap=void 0};T.prototype={_filterAnnotationModelMessage:function(t){delete t.refreshAction,delete t.sticky},addGlobalListener:function(t){this._replayEmitter.subscribe(t)},intersectPoint:function(t,e,o,n){var a=this._getFeatureModel("material").findFirstMaterial(t._nodePath);this._replayEmitter.emit("click",{position3D:e,position2D:o,normal:n,instanceID:this._getHitNodeID(t),material:a?a.getJSON():null})},_getFeatureModel:function(t){var e=this._partial.scene.getFeatures()[t];if(e)return e.getModel()},_getViewerOSG:function(){return this._getViewer()._viewer},_getViewer:function(){return this._partial.scene},_emitEvents:function(){var t=["viewerready","annotationFocus","annotationBlur","click"];this._partial.scene.on("all",function(e,o){-1!==t.indexOf(e)&&this._replayEmitter.emit(e,o)}.bind(this)),this.emitEvents=function(){}},_computeSceneGraph:function(){var t=this._sceneGraphVisitor;t.isDirty()&&this._getViewer().getRootModel().accept(t)},_getRootNode:function(){return this._computeSceneGraph(),this._sceneGraphVisitor.getRootNode()},_getRealNodeMap:function(){return this._computeSceneGraph(),this._sceneGraphVisitor.getRealNodeMap()},_getRepresentationNodeMap:function(){return this._computeSceneGraph(),this._sceneGraphVisitor.getRepresentationNodeMap()},_convertDataUriToImage:function(t,e,o){var n=this._getFeatureModel("material").getImageCollection();m.Z.instance.getOrCreateImage(t).promise.then((function(a){var i=n.addNewImage({uid:e,url:t,width:a.getWidth(),height:a.getHeight(),name:t.slice(0,100)});o(null,i.getUID())})).catch((function(){o("failed to add texture")}))},start:function(t){this._partial.start(),t(null)},stop:function(t){this._partial.stop(),t(null)},load:function(t){this._partial.load(),t(null)},gotoAnnotation:function(t,e){var o=this._getFeatureModel("hotspot").get("hotspots"),n=o.at(t);o.trigger("select",n),e(null,t)},getAnnotationList:function(t){var e=this._getFeatureModel("hotspot").get("hotspots").toJSON();e.forEach(this._filterAnnotationModelMessage.bind(this)),t(null,e)},lookat:function(t,e,o,n){this.setCameraLookAt(t,e,o,n)},setFov:function(t,e){var o=this._getFeatureModel("camera");o.set("dollyPrevent",!0);var n=o.setJSON({fov:t});e(n.length?n:null,t),o.set("dollyPrevent",!1)},getCurrentTime:function(t){var e=this._getFeatureModel("animation"),o=e.getCurrentAnimation().get("duration");t(null,e.get("progress")*o/100)},play:function(t){this._getFeatureModel("animation").set("playing",!0),t(null)},pause:function(t){var e=this._getFeatureModel("animation");e?(e.set("playing",!1),t(null)):t("no animation feature")},seekTo:function(t,e){var o=this._getFeatureModel("animation"),n=100*t/o.getCurrentAnimation().get("duration");o.trigger("seek",n),e(null)},getAnimations:function(t){var e=this._getFeatureModel("animation"),o=[];e.get("animations").forEach((function(t){var e=[];e.push(t.get("uid")),e.push(t.get("name")),e.push(t.get("duration")),o.push(e)})),t(null,o)},setCurrentAnimationByUID:function(t,e){this._getFeatureModel("animation").set("currentUID",t),e(null)},setCycleMode:function(t,e){var o=this._getFeatureModel("animation");1===o.get("animations").length&&"all"===t&&(t="one");var n=o.setJSON({cycleMode:t},{validate:!0,warnOnError:!0});e(n&&n.length?n:null)},setSpeed:function(t,e){var o=this._getFeatureModel("animation").setJSON({speed:t},{validate:!0,warnOnError:!0});e(o&&o.length?o:null,t)},getSceneGraph:function(t){t(null,this._getRootNode())},getNodeMap:function(t){t(null,this._getRepresentationNodeMap())},getNodeMask:function(t,e){var o=this._getNodeFromUserNodeID(t);o?e(null,o.getNodeMask()):e("node with id "+t.toString()+" not found")},getMatrix:function(t,e){var o=this._getNodeFromUserNodeID(t);o?e(null,{local:o.getMatrix(),world:o.getWorldMatrices()[0]}):e("node with id "+t.toString()+" not found")},setMatrix:function(t,e,o){var n=this._getNodeFromUserNodeID(t);n?(I.mat4.copy(n.getMatrix(),e),n.dirtyBound(),o(null),f.Z.redrawShadow()):o("node with id "+t.toString()+" not found")},hide:function(t,e){var o=this._getNodeFromUserNodeID(t);o?(o.setNodeMask(0),e(null)):e("show: node id "+t+" not found"),f.Z.redrawShadow()},show:function(t,e){var o=this._getNodeFromUserNodeID(t);o?(o.setNodeMask(-1),e(null)):e("show: node id "+t+" not found"),f.Z.redrawShadow()},translate:function(){var t,e,o=arguments.length,n=arguments[o-1],a=arguments[0],i=arguments[1];4===o?t=arguments[2]:5===o&&(t=arguments[2],e=arguments[3]),t=t||0;var r=L[e]||L.easeOutQuad,s=this._getNodeFromUserNodeID(a);if(s)if(s.getTypeID()===I.MatrixTransform.typeID){if(t>0){var l=I.vec3.create();I.mat4.getTranslation(l,s.getMatrix());var u=new M(l,i,t,r,(function(t){s.removeUpdateCallback(u),n(null,t)}));s.addUpdateCallback(u)}else I.mat4.setTranslation(s.getMatrix(),i),s.dirtyBound(),n(null,i);f.Z.redrawShadow()}else n("you can only translate MatrixTransform nodes");else n("node with id "+a.toString()+" not found")},rotate:(C=I.vec3.create(),F=I.vec3.create(),function(){var t,e,o=arguments.length,n=arguments[o-1],a=arguments[0],i=arguments[1];4===o?t=arguments[2]:5===o&&(t=arguments[2],e=arguments[3]),t=t||0;var r=L[e]||L.easeOutQuad,s=this._getNodeFromUserNodeID(a);if(s)if(s.getTypeID()===I.MatrixTransform.typeID){var l=I.quat.create(),u=I.mat4.create();if(I.mat4.fromRotation(u,-i[0],I.vec3.set(F,i[1],i[2],i[3])),I.mat4.getRotation(l,u),t>0){var c=I.quat.create();I.mat4.getRotation(c,s.getMatrix());var d=new k(c,l,t,r,(function(t){s.removeUpdateCallback(d),n(null,t)}));s.addUpdateCallback(d)}else I.mat4.fromQuat(u,l),I.mat4.getTranslation(C,s.getMatrix()),I.mat4.setTranslation(u,C),I.mat4.copy(s.getMatrix(),u),s.dirtyBound(),n(null,i);f.Z.redrawShadow()}else n("you can only translate MatrixTransform nodes");else n("node with id "+a.toString()+" not found")}),getRootMatrixNode:function(t){var e=this._getViewer().getRootModel();if(e||t("No scene loaded"),!this._nodeInTheMiddle){this._nodeInTheMiddle=new I.MatrixTransform,this._nodeInTheMiddle.setName("NITM");for(var o=e.getChildren(),n=0,a=o.length;n<a;n++)this._nodeInTheMiddle.addChild(o[n]);e.removeChildren(),e.addChild(this._nodeInTheMiddle)}t(null,this._nodeInTheMiddle.getInstanceID(),this._nodeInTheMiddle.getMatrix())},getCameraLookAt:function(t){var e=this._getViewerOSG().getManipulator(),o=[],n=[];e.getTarget(o),e.getEyePosition(n),t(null,{position:n,target:o})},setCameraLookAt:function(t,e){var o=this._getFeatureModel("camera"),n=this._getViewerOSG().getManipulator(),a=arguments[arguments.length-1],i=3===arguments.length?2:arguments[2];i<=0?n.setTargetAndEye(e,t):(o.setTargetAndEye(e,t),o.set("animationDuration",i)),f.Z.redrawShadow(),a(null)},getScreenShot:function(){var t,e,o=arguments.length,n=arguments[o-1],a="image/jpeg";if(2===o)a=arguments[0];else if(3===o)t=Math.floor(arguments[0]),e=Math.floor(arguments[1]);else if(4===o)t=Math.floor(arguments[0]),e=Math.floor(arguments[1]),a=arguments[2];else if(1!==o)return void n("Wrong number of arguments, signature should be (width, height, [callback]), (width, height, mimetype, [callback]), (mimetype, [callback]) or ([callback]).");var i=this._getViewer().getScreenShot(t,e);n(null,i.toDataURL(a))},getMaterialList:function(t){var e=this._getFeatureModel("material");t(null,(0,c.Z)(e.getJSON()))},getTextureList:function(t){t(null,this._getFeatureModel("material").getImageCollection().toJSON())},addTexture:function(t,e){this._convertDataUriToImage(t,void 0,e)},updateTexture:function(t,e,o){this._convertDataUriToImage(t,e,function(t){if(t)o(t);else{var n=this._getFeatureModel("material").getMaterials();for(var a in n){var i=n[a].getChannels();for(var r in i){var s=i[r],l=s.getTextureModel();l&&l.getUID()===e&&s.trigger("updateChannel")}}o(null,e)}}.bind(this))},setTextureQuality:function(t,e){var o=this._getFeatureModel("quality");o.get("promiseReady").then(function(n){var a={ld:0,sd:1,hd:2};if(n.high||(a={ld:0,hd:1}),n.mid||(a={hd:0}),t in a){var i=a[t];o.set("level",i),e(null,"texture quality set to "+i)}else{var r=(0,d.Z)(a,(function(t,e){return e})).join(", ");e(['Quality must be a string "ld", "sd" or "hd".'," Available qualities for this model are : ",r].join(""),null)}}.bind(this))},setMaterial:function(t,e){var o=this._getFeatureModel("material"),n=t.stateSetID,a=o.getMaterialByStateSetID(n);a.setMaterialJSON(t,o.getImageCollection(),{validate:!1,warnOnError:!1}),a.trigger("apply"),f.Z.redrawShadow(),e(null)},setPostProcessing:function(t,e){this._getFeatureModel("postProcess").set(t),e(null)},getPostProcessing:function(t){t(this._getFeatureModel("postProcess").toJSON())},getWorldToScreenCoordinates:function(t,e){var o=S.Z.getScreenPositionFromWorldPoint(t);e({glCoord:o.slice(0,2),canvasCoord:x.Z.glCoordToCanvas(o[0],o[1],o).slice(0,2)})},_getNodeFromUserNodeID:function(t){return this._getRealNodeMap()[t]},_getHitNodeID:function(t){if(t&&t._nodePath&&t._nodePath.length){var e=t._nodePath[t._nodePath.length-1];if(e)return e.getInstanceID()}}};const E=T;var D,A,N,O,Z=o("s4Wi"),P=o("OT8Q"),R=o("EMig"),V=o("1H3u"),U=o("Bno+"),G=o("/Wmr"),B=o("Oyie"),j=u.Z.osg,H=function(){E.apply(this,arguments),this._displayed=!1,U.Z.getModelDisplayed().then(function(){this._displayed=!0}.bind(this)),this._pickMask={click:P.Z.PICK_GEOMETRY_FAST,mousemove:P.Z.PICK_GEOMETRY_FAST}};H.prototype=(0,G.Z)(E.prototype,{addGlobalListener:function(t){V.Z.getBoxReady().then(function(){Z.Z.initViewerAPI(this),this._getViewer().getInputManager().setEnable(R.Z.SCENE_VIEWERAPI,!0)}.bind(this)),this._replayEmitter.subscribe(t)},intersectPoint:void 0,_emitEvents:function(){var t={viewerready:"viewerready",started:"viewerstart",stopped:"viewerstop",annotationFocus:"annotationFocus",annotationBlur:"annotationBlur",annotationMouseEnter:"annotationMouseEnter",annotationMouseLeave:"annotationMouseLeave",annotationSelect:"annotationSelect",nodeMouseEnter:"nodeMouseEnter",nodeMouseLeave:"nodeMouseLeave",click:"click",cameraStart:"camerastart",cameraStop:"camerastop"},e=function(e,o){var n=t[e];n&&this._replayEmitter.emit(n,o)}.bind(this);this._partial.on("all",e),this._partial.scene.on("all",e),this._emitEvents=function(){}},onCursorUp:(A=j.vec3.create(),N=j.vec3.create(),O=j.vec2.create(),function(t){if(this._displayed){O[0]=t.canvasX,O[1]=t.canvasY;var e=S.Z.computeNearestIntersection2D(O[0],O[1],this._pickMask.click),o={position3D:null,position2D:O,normal:null,instanceID:null,material:null};if(e){S.Z.getWorldPositionFromHit(e,N,A);var n=this._getFeatureModel("material").findFirstMaterial(e._nodePath);o.normal=A,o.position3D=N,o.instanceID=this._getHitNodeID(e),o.material=n?n.getJSON():null,this._replayEmitter.emit("click",o)}else this._replayEmitter.emit("click",o)}}),onMouseMove:function(){var t,e,o=j.vec3.create(),n=j.vec3.create(),a=j.vec2.create();return function(i){if(this._displayed){a[0]=i.canvasX,a[1]=i.canvasY;var r=S.Z.computeNearestIntersection2D(a[0],a[1],this._pickMask.click);if(r){S.Z.getWorldPositionFromHit(r,n,o);var s=this._getHitNodeID(r),l=this._getFeatureModel("material").findFirstMaterial(r._nodePath);if(e===s)return;return e&&this._replayEmitter.emit("nodeMouseLeave",{position3D:null,position2D:null,normal:o,instanceID:e,material:t}),e=s,t=l?l.getJSON():null,void this._replayEmitter.emit("nodeMouseEnter",{position3D:n,position2D:a,normal:o,instanceID:e,material:t})}e&&(this._replayEmitter.emit("nodeMouseLeave",{position3D:n,position2D:a,normal:o,instanceID:e,material:t}),e=void 0,t=void 0)}}}(),setListenerOptions:function(t){if(t&&"function"!=typeof t)switch(t.name){case"click":this._pickMask.click="slow"===t.pick?P.Z.PICK_GEOMETRY_SLOW:P.Z.PICK_GEOMETRY_FAST;break;case"nodeMouseEnter":case"nodeMouseLeave":this._pickMask.mousemove="slow"===t.pick?P.Z.PICK_GEOMETRY_SLOW:P.Z.PICK_GEOMETRY_FAST}},pickColor:(D=new Uint8Array(4),function(t,e){new B(function(e,o){var n=this._getViewerOSG().getCamera();n.setFinalDrawCallback((function(a){var i=a.getGraphicContext();if(i.checkFramebufferStatus(i.FRAMEBUFFER)===i.FRAMEBUFFER_COMPLETE){i.flush(),i.finish();var r=t[0]*(i.drawingBufferWidth/i.canvas.clientWidth),s=i.drawingBufferHeight*(1-t[1]/i.canvas.clientHeight);i.readPixels(r,s,1,1,i.RGBA,i.UNSIGNED_BYTE,D),e(D),n.setFinalDrawCallback(void 0)}else o()}))}.bind(this)).then((function(){e(D)}))}),unselectAnnotation:function(t){this.gotoAnnotation(-1,t)},requestRedraw:function(){f.Z.redrawShadow()}});const W=H;var q=o("dHM/"),K=u.Z.osg,z=u.Z.osgAnimation,J=function(){W.apply(this,arguments),this.updateDaemon=void 0};J.prototype=(0,G.Z)(W.prototype,{setCameraEasing:function(t){this._getFeatureModel("camera").set("easingFunction",t)},hideAnnotation:function(t,e){this._getFeatureModel("hotspot").get("hotspots").at(t).set("visible",!1),f.Z.draw(),e(null)},showAnnotation:function(t,e){this._getFeatureModel("hotspot").get("hotspots").at(t).set("visible",!0),f.Z.draw(),e(null)},createAnnotation:function(t,e,o,n,a,i,r){var s=S.Z.computeNearestIntersection3D(t,e);if(!s)return r(null);var l=this._getFeatureModel("hotspot"),u=l.createHotspot(s,!0);q.Z.getMarkdownPreview(i).then((function(t){u.set({name:a,content:{raw:i,rendered:t.result},eye:o,target:n}),f.Z.redrawShadow(),r(null,l.get("hotspots").length-1),f.Z.draw()}),function(){u.set({name:a,eye:o,target:n}),f.Z.redrawShadow(),r(null,l.get("hotspots").length-1),f.Z.draw()}.bind(this))},updateAnnotation:function(t){var e,o=this._getFeatureModel("hotspot").get("hotspots"),n=o.at(t);if(3===arguments.length){var a=arguments[1],i={};if(a.title&&(i.name=a.title),a.content&&(i.content={raw:a.content}),a.eye&&(i.eye=a.eye),a.target&&(i.target=a.target),e=arguments[2],a.content)return void q.Z.getMarkdownPreview(a.content).then(function(t){i.content.rendered=t.result;var o=n.toJSON();this._filterAnnotationModelMessage(o),e(null,o),n.set(i),f.Z.draw()}.bind(this),function(){var t=n.toJSON();this._filterAnnotationModelMessage(t),e(null,t),n.set(i),f.Z.draw()}.bind(this));n.set(i)}else e=arguments[1];var r=n.toJSON();this._filterAnnotationModelMessage(r),f.Z.redrawShadow(),e(null,r)},getAnnotation:function(t,e){var o=this._getFeatureModel("hotspot").get("hotspots").at(t).toJSON();this._filterAnnotationModelMessage(o),e(null,o)},removeAnnotation:function(t,e){var o=this._getFeatureModel("hotspot").get("hotspots"),n=o.at(t);o.remove(n),f.Z.redrawShadow(),e(null)},pickFromScreen:function(){var t=K.vec3.create(),e=K.vec3.create();return function(o,n){var a=S.Z.computeNearestIntersection2D(o[0],o[1],this._pickMask.click);if(!a)return n(null);S.Z.getWorldPositionFromHit(a,e,t);var i=this._getHitNodeID(a),r=this._getFeatureModel("material").findFirstMaterial(a._nodePath);n(null,{position3D:e,position2D:o,normal:t,instanceID:i,material:r?r.getJSON():null})}}(),pickFromScene:function(){var t=K.vec3.create(),e=K.vec3.create();return function(o,n,a){var i=S.Z.computeNearestIntersection3D(o,n);if(!i)return a(null);S.Z.getWorldPositionFromHit(i,e,t);var r=this._getHitNodeID(i),s=this._getFeatureModel("material").findFirstMaterial(i._nodePath);a(null,{position3D:e,normal:t,instanceID:r,material:s?s.getJSON():null})}}(),addVideoTexture:function(t,e,o){this._convertVideoDataUriToImage(t,void 0,e,o)},_convertVideoDataUriToImage:function(t,e,o,n){var a=this._getFeatureModel("material").getImageCollection();m.Z.instance.getOrCreateImage(t).promise.then((function(i){var r=a.addNewImage({uid:e,url:t,width:i.getWidth(),height:i.getHeight(),name:t.slice(0,100)});void 0!==o&&i.getImage&&(i.getImage().loop=o),n(null,r.getUID())})).catch((function(){n("failed to add texture")}))},translate:function(t,e,o){var n=arguments.length,a=arguments[n-1],i=0,r=z.easeOutQuad;n>2&&((o=arguments[2]).duration&&(i=o.duration),o.easing&&z[o.easing]&&(r=z[o.easing]));var s=this._getNodeFromUserNodeID(t);if(s)if(s.getTypeID()===K.MatrixTransform.typeID){if(i>0){var l=K.vec3.create();K.mat4.getTranslation(l,s.getMatrix());var u=new M(l,e,i,r,function(e){this.updateDaemon.removeTranslateUpdateCallback(t),a(null,e)}.bind(this));this.updateDaemon||this._initUpdateDaemon(),this.updateDaemon.addTranslateUpdateCallback(s,u,t)}else K.mat4.setTranslation(s.getMatrix(),e),s.dirtyBound(),a(null,e);f.Z.redrawShadow()}else a("you can only translate MatrixTransform nodes");else a("node with id "+t.toString()+" not found")},rotate:function(){var t=K.vec3.create(),e=K.vec3.create();return function(o,n,a){var i=arguments.length,r=arguments[i-1],s=0,l=z.easeOutQuad;i>2&&((a=arguments[2]).duration&&(s=a.duration),a.easing&&z[a.easing]&&(l=z[a.easing]));var u=this._getNodeFromUserNodeID(o);if(u)if(u.getTypeID()===K.MatrixTransform.typeID){var c=K.quat.create(),d=K.mat4.create();if(K.mat4.fromRotation(d,-n[0],K.vec3.set(e,n[1],n[2],n[3])),K.mat4.getRotation(c,d),s>0){var p=K.quat.create();K.mat4.getRotation(p,u.getMatrix());var h=new k(p,c,s,l,function(t){this.updateDaemon.removeRotateUpdateCallback(o),r(null,t)}.bind(this));this.updateDaemon||this._initUpdateDaemon(),this.updateDaemon.addRotateUpdateCallback(u,h,o)}else K.mat4.fromQuat(d,c),K.mat4.getTranslation(t,u.getMatrix()),K.mat4.setTranslation(d,t),K.mat4.copy(u.getMatrix(),d),u.dirtyBound(),r(null,n);f.Z.redrawShadow()}else r("you can only rotate MatrixTransform nodes");else r("node with id "+o.toString()+" not found")}}(),_initUpdateDaemon:function(){var t=this._getViewer().getRootModel();this.updateDaemon=new b(this._getRealNodeMap()),t.addUpdateCallback(this.updateDaemon)}});const Y=J;var Q=u.Z.osg,X=function(){Q.NodeVisitor.apply(this,arguments),this.reset()};Q.createPrototypeObject(X,Q.objectInherit(Q.NodeVisitor.prototype,{reset:function(){this._nodes=[],this._nodeMap={},this._nodeList={},this._dirty=!0,this._apiSceneID=0},isDirty:function(){return this._dirty},getRootNode:function(){return this._nodes[0]},getRealNodeMap:function(){return this._nodeList},getRepresentationNodeMap:function(){return this._nodeMap},createNodeEntry:function(t){this._dirty=!1;var e=t._uniqueID;this._nodeList[e]||(this._nodeList[e]=t);var o={name:t.getName(),instanceID:e,nodeMask:t.getNodeMask()};return this._nodeMap[e]||(this._nodeMap[e]=o),o},applyNode:function(t){var e=this._nodes;this._nodes=[],this.traverse(t);var o=this.createNodeEntry(t);o.children=this._nodes,o.type="Group",e.push(o),this._nodes=e},applyMatrixTransform:function(t){var e=this._nodes;this._nodes=[],this.traverse(t);var o=this.createNodeEntry(t);o.children=this._nodes,o.type="MatrixTransform",o.localMatrix=Q.mat4.clone(t.getMatrix()),o.worldMatrix=t.getWorldMatrices()[0],e.push(o),this._nodes=e},applyGeometry:function(t){var e=this._nodes;this._nodes=[],this.traverse(t);var o=this.createNodeEntry(t);o.type=t.className(),e.push(o),this._nodes=e},apply:function(t){if(void 0!==t._uniqueID){var e=t.getTypeID();e===Q.Node.typeID?this.applyNode(t):e===Q.MatrixTransform.typeID?this.applyMatrixTransform(t):t instanceof Q.Geometry?this.applyGeometry(t):this.traverse(t)}else this.traverse(t)}}));const $=X;var tt,et=u.Z.osg,ot=function(){Y.apply(this,arguments),this._sceneGraphVisitor=new $,this.updateDaemon=void 0,this._startDrag=!1,this._startCoord=et.vec2.create()};ot.prototype=(0,G.Z)(Y.prototype,{addGlobalListener:function(t){V.Z.getBoxReady().then(function(){Z.Z.initViewerAPI_1_4(this),this._getViewer().getInputManager().setEnable(R.Z.SCENE_VIEWERAPI_1_4,!0)}.bind(this)),this._replayEmitter.subscribe(t)},onCursorUp:(tt=et.vec2.create(),function(t){var e=this._startDrag&&et.vec2.dist(et.vec2.set(tt,t.glX,t.glY),this._startCoord)>5;this._startDrag=!1,e||W.prototype.onCursorUp.call(this,t)}),onCursorDown:function(t){et.vec2.set(this._startCoord,t.glX,t.glY),this._startDrag=!0},getFov:function(t){t(null,this._getFeatureModel("camera").get("fov"))},setCurrentAnimationByUID:function(t,e){E.prototype.setCurrentAnimationByUID.apply(this,arguments),f.Z.redrawShadow(),e(null)},setLight:function(t,e,o){var n=this._getFeatureModel("lighting").get("lights")[t];e&&(void 0!==e.matrix&&n.set("matrix",e.matrix),void 0!==e.enabled&&n.set("enable",e.enabled),void 0!==e.type&&n.set("type",e.type),void 0!==e.shadowEnabled&&n.set("castShadows",e.shadowEnabled),void 0!==e.color&&n.set("color",e.color),void 0!==e.intensity&&n.set("intensity",e.intensity)),f.Z.redrawShadow(),o(null)},getLight:function(t,e){var o=this._getFeatureModel("lighting").get("lights");(!o||t>=o.length)&&e("light with id "+t.toString()+" not found");var n=o[t];e(null,{matrix:n.get("matrix"),enabled:n.get("enable"),shadowEnabled:n.get("castshadows"),color:n.get("color"),intensity:n.get("intensity")})},setEnvironment:function(t,e){var o=this._getFeatureModel("environment");t&&(void 0!==t.enabled&&o.set("enable",t.enabled),void 0!==t.exposure&&o.set("exposure",t.exposure),void 0!==t.lightIntensity&&o.set("lightIntensity",t.lightIntensity),void 0!==t.rotation&&o.set("rotation",t.rotation),void 0!==t.shadowEnabled&&o.set("shadowEnable",t.shadowEnabled)),f.Z.redrawShadow(),e(null)},getEnvironment:function(t){var e=this._getFeatureModel("environment");t(null,{enabled:e.get("enable"),exposure:e.get("exposure"),lightIntensity:e.get("lightIntensity"),rotation:e.get("rotation"),shadowEnabled:e.get("shadowEnable")})},setShadingStyle:function(t,e,o){var n=this._getFeatureModel("shadingStyle");try{n.set("renderer",t),e&&e.type&&n.set("type",e.type)}catch(t){return o(null)}f.Z.redrawShadow(),o(null)},getShadingStyle:function(t){var e=this._getFeatureModel("shadingStyle");t(null,{shadingStyle:e.get("renderer"),type:e.get("type")})},setWireframe:function(t,e,o){var n=this._getFeatureModel("shadingStyle");try{n.set("wireframeEnable",t),e&&e.color&&n.set("wireframeColor",e.color)}catch(t){return o(null)}f.Z.redrawShadow(),o(null)},getWireframe:function(t){var e=this._getFeatureModel("shadingStyle");t(null,{enabled:e.get("wireframeEnable"),color:e.get("wireframeColor")})},_getHitNodeID:function(t){if(t&&t._nodePath&&t._nodePath.length){var e=t._nodePath[t._nodePath.length-1];if(e)return e._uniqueID}},getRootMatrixNode:function(t){var e=this._getViewer().getRootModel();if(e||t("No scene loaded"),!this._nodeInTheMiddle){var o=this._sceneGraphVisitor;o.reset(),this._getViewer().getRootModel().accept(o);var n=0,a=o.getRepresentationNodeMap();for(var i in a){var r=parseInt(i,10);n=n>r?n:r}n++,this._nodeInTheMiddle=new et.MatrixTransform,this._nodeInTheMiddle.setName("NITM"),this._nodeInTheMiddle._uniqueID=n;for(var s=e.getChildren(),l=0,u=s.length;l<u;l++)this._nodeInTheMiddle.addChild(s[l]);e.removeChildren(),e.addChild(this._nodeInTheMiddle),o.reset(),this._getViewer().getRootModel().accept(o)}t(null,this._nodeInTheMiddle._uniqueID,this._nodeInTheMiddle.getMatrix())}});const nt=ot;var at=u.Z.osg,it=function(){$.apply(this,arguments)};at.createPrototypeObject(it,at.objectInherit($.prototype,{setApiCore:function(t){this._apicore=t},createNodeEntry:function(t){this._dirty=!1;var e=t._uniqueID;this._nodeList[e]||(this._nodeList[e]=t);var o=this._apicore._getFeatureModel("material"),n=o?o.findFirstMaterial(this.nodePath):"",a={name:t.getName(),instanceID:e,nodeMask:t.getNodeMask(),materialID:n?n.getJSON().id:null};return this._nodeMap[e]||(this._nodeMap[e]=a),a}}));const rt=it;var st=function(){this.actions=[],this.startedAt=0,this.recording=!1};st.prototype={addCamera:function(t){if(this.recording){if(this.lastCamera){var e=this.lastCamera;if(e&&e.position[0]===t.position[0]&&e.position[1]===t.position[1]&&e.position[2]===t.position[2]&&e.target[0]===t.target[0]&&e.target[1]===t.target[1]&&e.target[2]===t.target[2])return}this.lastCamera=t,t.type="camera",void 0===t.timeStamp&&(t.timeStamp=this.timeElapsed()),this.actions.push(t)}},addInputEvent:function(t,e){this.recording&&(e.type=t,e.timeStamp=this.timeElapsed(),this.actions.push(e))},start:function(){this.recording||(this.actions=[],this.startedAt=window.performance.now(),this.recording=!0)},stop:function(){this.recording=!1;for(var t=this.actions.length,e=new Float32Array(8*t),o=0,n=0;n<t;n++){var a=this.actions[n];switch(a.type){case"camera":e[o++]=a.timeStamp,e[o++]=1,e[o++]=a.position[0],e[o++]=a.position[1],e[o++]=a.position[2],e[o++]=a.target[0],e[o++]=a.target[1],e[o++]=a.target[2];break;case"click":e[o++]=a.timeStamp,e[o++]=2,e[o++]=a.clientX,e[o++]=a.clientY,e[o++]=a.ctrlKey,e[o++]=a.shiftKey,e[o++]=a.altKey,o++;break;case"wheel":e[o++]=a.timeStamp,e[o++]=3,e[o++]=a.clientX,e[o++]=a.clientY,e[o++]=a.ctrlKey,e[o++]=a.shiftKey,e[o++]=a.altKey,o++;break;case"mousemove":e[o++]=a.timeStamp,e[o++]=4,e[o++]=a.clientX,e[o++]=a.clientY,e[o++]=a.ctrlKey,e[o++]=a.shiftKey,e[o++]=a.altKey,o++;break;case"mousedown":e[o++]=a.timeStamp,e[o++]=5,e[o++]=a.clientX,e[o++]=a.clientY,e[o++]=a.ctrlKey,e[o++]=a.shiftKey,e[o++]=a.altKey,o++;break;case"mouseup":e[o++]=a.timeStamp,e[o++]=6,e[o++]=a.clientX,e[o++]=a.clientY,e[o++]=a.ctrlKey,e[o++]=a.shiftKey,e[o++]=a.altKey,o++;break;case"dblclick":e[o++]=a.timeStamp,e[o++]=7,e[o++]=a.clientX,e[o++]=a.clientY,e[o++]=a.ctrlKey,e[o++]=a.shiftKey,e[o++]=a.altKey,o++}}return this.actions=[],e.slice(0,o)},timeElapsed:function(){return window.performance.now()-this.startedAt}};const lt=st;var ut=function(){nt.apply(this,arguments),this._sceneGraphVisitor=new rt,this._sceneGraphVisitor.setApiCore(this)};ut.prototype=(0,G.Z)(nt.prototype,{setAnnotationsTexture:function(t,e){this._getFeatureModel("hotspot").set("textureOptions",t),f.Z.redrawShadow(),e(null)},gotoAnnotation:function(t,e,o){var n=this._getFeatureModel("hotspot").get("hotspots"),a=n.at(t);if(!a)return n.trigger("select",a),void o(null,t);a.set("cameraPreventAnimation",e.preventCameraAnimation),a.set("cameraPreventMove",e.preventCameraMove),n.trigger("select",a),a.set("cameraPreventAnimation",!1),a.set("cameraPreventMove",!1),o(null,t)},_convertVideoDataUriToImage:function(t,e,o,n){var a=this._getFeatureModel("material").getImageCollection();m.Z.instance.getOrCreateImage(t,o||{}).promise.then((function(o){var i=a.addNewImage({uid:e,url:t,width:o.getWidth(),height:o.getHeight(),name:t.slice(0,100)});n(null,i.getUID())})).catch((function(){n("failed to add texture")}))},addVideoTexture:function(t,e,o){this._convertVideoDataUriToImage(t,void 0,e,o)},setBackground:function(t,e){var o=this._getFeatureModel("background");t.uid?(o.set("enable","fixed"),o.set("uid",t.uid)):t.color?(o.set("enable","color"),o.set("color",t.color)):t.enable?o.set("enable",t.enable):t.transparent&&o.set("enable","none"),e(null)},_getUserCollectionList:function(t,e){var o=new XMLHttpRequest;o.open("GET","https://api.sketchfab.com/v3/me/"+e,!0),o.responseType="json",o.onload=function(){if(4===o.readyState&&200===o.status){var e=o.response,n=[];for(var a in e.results){var i=e.results[a];i&&i.uid&&n.push({name:i.name,uid:i.uid})}t(n)}},o.onerror=function(){t(null)},o.send(null)},getBackgroundList:function(t){this._getUserCollectionList(t,"backgrounds")},setEnvironment:function(t,e){var o=this._getFeatureModel("environment");t&&(void 0!==t.enabled&&o.set("enable",t.enabled),void 0!==t.exposure&&o.set("exposure",t.exposure),void 0!==t.lightIntensity&&o.set("lightIntensity",t.lightIntensity),void 0!==t.rotation&&o.set("rotation",t.rotation),void 0!==t.shadowEnabled&&o.set("shadowEnable",t.shadowEnabled),void 0!==t.blur&&o.set("blur",t.blur),void 0!==t.uid&&o.set("uid",t.uid)),f.Z.redrawShadow(),e(null)},getEnvironmentList:function(t){this._getUserCollectionList(t,"environments")},setCycleMode:function(t,e){var o,n=this._getFeatureModel("animation");switch(t){case"loopOne":o="one";break;case"loopAll":o="all";break;case"one":o="oneAndStop";break;case"all":o="";break;default:o=t}n.set("cycleMode",o),f.Z.redrawShadow(),e(null)},_emitEvents:function(){var t={viewerready:"viewerready",started:"viewerstart",stopped:"viewerstop",animationChange:"animationChange",animationEnded:"animationEnded",animationPlay:"animationPlay",animationStop:"animationStop",annotationFocus:"annotationFocus",annotationBlur:"annotationBlur",annotationMouseEnter:"annotationMouseEnter",annotationMouseLeave:"annotationMouseLeave",annotationSelect:"annotationSelect",nodeMouseEnter:"nodeMouseEnter",nodeMouseLeave:"nodeMouseLeave",click:"click",cameraStart:"camerastart",cameraStop:"camerastop"},e=function(e,o){var n=t[e];n&&this._replayEmitter.emit(n,o)}.bind(this);this._partial.on("all",e),this._partial.scene.on("all",e),this._emitEvents=function(){}},_userProvidedEventDispatch:function(t,e,o){if(this.actionsRecorder&&this.actionsRecorder.addInputEvent(t,o),!this._getViewer()||!this._getViewer().getFeaturesManager())return!0;var n=!this._getViewer().getFeaturesManager().getCanvas().dispatchEvent(e);return f.Z.redrawShadow(),n},_userProvidedMouseEventDispatch:function(t,e){var o=new MouseEvent(t,{view:window,bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey});return this._userProvidedEventDispatch(t,o,e)},mouseMove:function(t,e){e(this._userProvidedMouseEventDispatch("mousemove",t))},mouseDown:function(t,e){e(this._userProvidedMouseEventDispatch("mousedown",t))},mouseUp:function(t,e){e(this._userProvidedMouseEventDispatch("mouseup",t))},mouseClick:function(t,e){e(this._userProvidedMouseEventDispatch("mouseup",t))},mouseDblClick:function(t,e){e(this._userProvidedMouseEventDispatch("dblclick",t))},mouseWheel:function(t,e){var o=new WheelEvent("wheel",{view:window,bubbles:!0,cancelable:!0,deltaX:t.deltaX,deltaY:t.deltaY});e(this._userProvidedEventDispatch("wheel",o,t))},_getCameraInfo:function(){var t={target:[],position:[]};return this.manipulator.getTarget(t.target),this.manipulator.getEyePosition(t.position),t},_cameraRecord:function(){if(this.actionsRecorder){var t=this._getCameraInfo();this.actionsRecorder.addCamera(t),requestAnimationFrame(this._cameraRecordBinding)}},startRecord:function(t){this.actionsRecorder=new lt,this.manipulator=this._getViewerOSG().getManipulator();var e=this._getCameraInfo();this.actionsRecorder.start(),e.timeStamp=0,this.actionsRecorder.addCamera(e),this._cameraRecordBinding=this._cameraRecord.bind(this),requestAnimationFrame(this._cameraRecordBinding),t("recording started")},endRecord:function(t){var e=this._getCameraInfo();this.actionsRecorder.addCamera(e),t(this.actionsRecorder.stop()),this.actionsRecorder=void 0}});const ct=ut;var dt=function(){ct.apply(this,arguments)};dt.prototype=(0,G.Z)(ct.prototype,{hideAnnotationTooltip:function(t){this._getFeatureModel("hotspot").get("proxyModel").set("annotationsVisible",!1),t(null)},showAnnotationTooltip:function(t){this._getFeatureModel("hotspot").get("proxyModel").set("annotationsVisible",!0),t(null)},setCameraConstraints:function(t,e){var o=this._getFeatureModel("camera"),n=o.setJSON(t,{validate:!0});o.trigger("change:enableCameraConstraints"),o.set("viewer-api-hotspots",!0),e(n)},setEnableCameraConstraints:function(t,e){this._getFeatureModel("camera").set("enableCameraConstraints",t),e(null)},setAnnotationCameraTransition:function(t,e,o){this._getFeatureModel("hotspot").preventHotspotCameraAction(t,e),o(null)},getAnimations:function(t){var e=this._getFeatureModel("animation").get("animations");if(!e.length)return t(null,[]);var o=new Array(e.length);return e.forEach((function(t){var e=[];e.push(t.get("uid")),e.push(t.get("name")),e.push(t.get("duration")),e.push(t.get("order")),o[t.get("order")]=e})),t(null,o)},_initializeAnnotationMarkdown:function(t,e,o,n,a,i,r){q.Z.getMarkdownPreview(i).then((function(s){e.set({name:a,content:{raw:i,rendered:s.result},eye:o,target:n}),f.Z.redrawShadow(),r(null,t.get("hotspots").length-1),f.Z.draw()}),function(){e.set({name:a,eye:o,target:n}),f.Z.redrawShadow(),r(null,t.get("hotspots").length-1),f.Z.draw()}.bind(this))},createAnnotationFromWorldPosition:function(t,e,o,n,a,i){var r=this._getFeatureModel("hotspot"),s=r.createHotspotFromWorldPosition(t,!0);this._initializeAnnotationMarkdown(r,s,e,o,n,a,i)},createAnnotationFromScenePosition:function(t,e,o,n,a,i){var r=this._getFeatureModel("hotspot"),s=r.createHotspotFromScenePosition(t,!0);this._initializeAnnotationMarkdown(r,s,e,o,n,a,i)},removeAllAnnotations:function(t){for(var e=this._getFeatureModel("hotspot").get("hotspots");e.length>0;)e.remove(e.at(0));f.Z.redrawShadow(),t(null)},recenterCamera:function(t){this._getViewerOSG().getManipulator().computeHomePosition(),t(null)},setUserInteraction:function(t,e){this._getViewer().getInputManager().setEnable(R.Z.SCENE,t),e(null)}});const pt=dt;var ht=function(){pt.apply(this,arguments)};ht.prototype=(0,G.Z)(pt.prototype,{setUVOffset:function(t,e,o,n,a){this._getFeatureModel("material").setUVOffset(t.stateSetID,e,o,n),a(null)},setUVRotation:function(t,e,o,n){this._getFeatureModel("material").setUVRotation(t.stateSetID,e,o),n(null)},setUVScale:function(t,e,o,n,a){this._getFeatureModel("material").setUVScale(t.stateSetID,e,o,n),a(null)},refreshDraw:function(){f.Z.redrawShadow(),f.Z.requestDrawHiddenDefered()},refreshCanvas:function(){var t=this._getViewer().getCanvas(),e=t.width;t.width=e+1,new(s())((function(t){t()})).finally((function(){t.width=e}))},setHighlightOptions:function(t){var e=this._getFeatureModel("outline");e&&(void 0!==t.outlineWidth&&e.set("outlineWidth",t.outlineWidth),void 0!==t.outlineColor&&e.set("colorSelection",t.outlineColor),void 0!==t.highlightColor&&e.set("colorHover",t.highlightColor),void 0!==t.outlineDuration&&e.set("durationOutline",t.outlineDuration),void 0!==t.highlightDuration&&e.set("durationHighlight",t.highlightDuration))},highlightMaterial:function(t){var e=this._getFeatureModel("outline");if(null==t)return e.trigger("hideOutline"),void e.trigger("hideHighlight");var o=this._getFeatureModel("material"),n=t.stateSetID,a=o.getMaterialByStateSetID(n);e.trigger("displayOutlineNoFocus",a.get("stateSet"))},setEnableCameraConstraints:function(t,e){var o=this._getFeatureModel("camera");o.set("enableCameraConstraints",t),o.set("useCameraConstraints",t),e(null)}});const gt=ht;var mt=u.Z.osg,ft=function(){rt.apply(this,arguments)};mt.createPrototypeObject(ft,mt.objectInherit(rt.prototype,{setApiCore:function(t){this._apicore=t},createNodeEntry:function(t){this._dirty=!1;var e=t._uniqueID;this._nodeList[e]||(this._nodeList[e]=t);var o=this._apicore._getFeatureModel("material"),n=o?o.findFirstMaterial(this.nodePath):"",a={name:t.getName(),instanceID:e,nodeMask:t.getNodeMask(),materialID:n?n.id:null};return this._nodeMap[e]||(this._nodeMap[e]=a),a}}));const vt=ft;var _t=function(){gt.apply(this,arguments),this._sceneGraphVisitor=new vt,this._sceneGraphVisitor.setApiCore(this)};_t.prototype=(0,G.Z)(gt.prototype,{setSpeed:function(t,e){var o=this._getFeatureModel("animation").setJSON({speed:t},{validate:!0,warnOnError:!0});e(o&&o.length?o:null,t),e(null)},setCameraLookAtEndAnimationCallback:function(){var t=this._getFeatureModel("camera"),e=arguments[arguments.length-1];t.set("userEndAnimationCallback",function(){e(null,!0)}.bind(this))},_emitEvents:function(){var t={viewerready:"viewerready",started:"viewerstart",stopped:"viewerstop",backgroundLoaded:"backgroundLoaded","primary-progress":"modelLoadProgress","secondary-progress":"textureLoadProgress",animationChange:"animationChange",animationEnded:"animationEnded",animationBegan:"animationBegan",animationPlay:"animationPlay",animationStop:"animationStop",annotationFocus:"annotationFocus",annotationBlur:"annotationBlur",annotationMouseEnter:"annotationMouseEnter",annotationMouseLeave:"annotationMouseLeave",annotationSelect:"annotationSelect",nodeMouseEnter:"nodeMouseEnter",nodeMouseLeave:"nodeMouseLeave",click:"click",cameraStart:"camerastart",cameraStop:"camerastop"},e=function(e,o){var n=t[e];n&&this._replayEmitter.emit(n,o)}.bind(this);this._partial.on("all",e),this._partial.scene.on("all",e),this._emitEvents=function(){}},focusOnVisibleGeometries:function(t){var e=this._getViewerOSG().getManipulator().getCurrentManipulator();e.setComputeBoundNodeMaskOverride(0),e.computeHomePosition(2),t(null),f.Z.redrawShadow()},startAR:function(){var t=new Event("fake",{bubbles:!0,cancelable:!1});this._partial.subviews.generalControls.onArClick(t)},setLightFeatureEnabled:function(t,e){this._getFeatureModel("lighting").set("enable",t),f.Z.redrawShadow(),e(null)},isLightFeatureEnabled:function(t){t(null,this._getFeatureModel("lighting").get("enable"))},hide:function(t,e){var o=this._getNodeFromUserNodeID(t);o?(o.setNodeMask(0),o.dirtyBound(),e(null)):e("show: node id "+t+" not found"),f.Z.redrawShadow()},show:function(t,e){var o=this._getNodeFromUserNodeID(t);o?(o.setNodeMask(-1),o.dirtyBound(),e(null)):e("show: node id "+t+" not found"),f.Z.redrawShadow()},setEnableCameraConstraints:function(t,e,o){var n=this._getFeatureModel("camera");n.set("enableCameraConstraints",t),n.set("useCameraConstraints",t),void 0!==o?void 0!==e.preventFocus&&n.set("preventCameraConstraintsFocus",e.preventFocus):o=e,o(null)},_setHotspot:function(t,e,o,n,a,i,r,s){e.set({name:a,content:{raw:i,rendered:r},eye:o,target:n,sticky:null},{silent:!0}),s(null,t.get("hotspots").length-1),e.set("building",void 0),f.Z.draw()},_initializeAnnotationMarkdown:function(t,e,o,n,a,i,r){var s=i&&i.length;if(s){for(var l=[[/!\[([^\[]+)\]\((?:javascript:)?([^\)]+)\)/g],[/\[([^\[]+)\]\((?:javascript:)?([^\)]+)\)/g],[/\n([^\n]+)\n/g],[/\n(#+)(.*)/g],[/(\*\*|__)(.*?)\1/g],[/(\*|_)(.*?)\1/g],[/\~\~(.*?)\~\~/g],[/\:\"(.*?)\"\:/g],[/\n\s*```\n([^]*?)\n\s*```\s*\n/g],[/`(.*?)`/g],[/\n(\*|\-|\+)(.*)/g],[/\n[0-9]+\.(.*)/g],[/\n(&gt;|\>)(.*)/g],[/\n-{5,}/g],[/(\|[^\n]+\|\r?\n)((?:\|:?[-]+:?)+\|)(\n(?:\|[^\n]+\|\r?\n?)*)?/g],[/\s?<\/ul>\s?<ul>/g],[/\s?<\/ol>\s?<ol>/g],[/<\/blockquote>\n<blockquote>/g],[/https?:\/\/[^"']*/g]],u=0;u<l.length&&null===i.match(l[u++]););s=!1}s?q.Z.getMarkdownPreview(i).then(function(s){this._setHotspot(t,e,o,n,a,i,s.result,r)}.bind(this),function(){this._setHotspot(t,e,o,n,a,void 0,void 0,r),e.set({name:a,eye:o,target:n})}.bind(this)):this._setHotspot(t,e,o,n,a,i,i,r)},createAnnotationFromWorldPosition:function(t,e,o,n,a,i){var r=this._getFeatureModel("hotspot"),s=r.createHotspotFromWorldPosition(t,!0,!0);this._initializeAnnotationMarkdown(r,s,e,o,n,a,i)},createAnnotationFromScenePosition:function(t,e,o,n,a,i){var r=this._getFeatureModel("hotspot"),s=r.createHotspotFromScenePosition(t,!0,!0);this._initializeAnnotationMarkdown(r,s,e,o,n,a,i)},_getFeatureModel:function(t){if(this._partial.scene){var e=this._partial.scene.getFeatures()[t];if(e)return e.getModel()}},hideAnnotationTooltip:function(t,e){var o=this._getFeatureModel("hotspot").get("hotspots");if(o){var n=1;return o.each((function(e){n===t&&e.set("hideAnnotationTooltip",!0),n++})),void e(null)}e("no annotations at all")},showAnnotationTooltip:function(t,e){var o=this._getFeatureModel("hotspot");o.get("proxyModel").set("hideAnnotationTooltip",void 0);var n=o.get("hotspots");if(n){var a=1;return n.each((function(e){a===t&&e.set("hideAnnotationTooltip",void 0),a++})),void e(null)}e("no annotations at all")},hideAnnotationTooltips:function(t,e){var o=this._getFeatureModel("hotspot").get("hotspots");if(o)return o.each((function(t){t.set("hideAnnotationTooltip",!0)})),void e(null);e("no annotations at all")},showAnnotationTooltips:function(t){var e=this._getFeatureModel("hotspot");e.get("proxyModel").set("hideAnnotationTooltip",void 0);var o=e.get("hotspots");if(o)return o.each((function(t){t.set("hideAnnotationTooltip",void 0)})),void t(null);t("no annotations at all")}});const yt=_t;var bt=function(){yt.apply(this,arguments)};bt.prototype=(0,G.Z)(yt.prototype,{hideAnnotationTooltip:function(t,e){var o=this._getFeatureModel("hotspot").get("hotspots");if(o){var n=0;return o.each((function(e){n===t&&e.set("hideAnnotationTooltip",!0),n++})),void e(null)}e("no annotations at all")},showAnnotationTooltip:function(t,e){var o=this._getFeatureModel("hotspot");o.get("proxyModel").set("hideAnnotationTooltip",void 0);var n=o.get("hotspots");if(n){var a=0;return n.each((function(e){a===t&&e.set("hideAnnotationTooltip",void 0),a++})),void e(null)}e("no annotations at all")},hideAnnotationTooltips:function(t){var e=this._getFeatureModel("hotspot").get("hotspots");if(e)return e.each((function(t){t.set("hideAnnotationTooltip",!0)})),void t(null);t("no annotations at all")},removeTexture:function(t,e){var o=!1,n=m.Z.instance.getTextureCollection(),a=n.get(t);a&&(a.isTextureNull&&!a.isTextureNull()&&a.releaseGLObjects(),n.remove(t),a.destroy(),o=!0);var i=this._getFeatureModel("material").getImageCollection();if(i&&i.forEach((function(e){void 0!==e&&(e.getUID()===t&&(i.remove(e),o=!0),0===e.getImages.length&&i.remove(e),e.destroy())})),!o)return e("failed to find  texture "+t);e()}});const wt=bt;var Mt=function(){wt.apply(this,arguments)};Mt.prototype=(0,G.Z)(wt.prototype,{createMaterial:function(t,e){e(null,this._getFeatureModel("material").makeMaterial(t).getJSON())},assignMaterial:function(t,e,o){this._getFeatureModel("material").assignMaterial(t,e),o(null)},createDecal:function(t,e){try{var o,n=this._getFeatureView("Decals").createDecalFromData(t);e(void 0!==n?null:"Couldn't create the decal (no surface hit for this position and normal)",n)}catch(o){e("Error when creating decal:\n"+o)}},destroyDecal:function(t,e,o){2===arguments.length&&(o=e);try{var n=this._getFeatureView("Decals");n.destroyDecal(t,e),o(null)}catch(e){o("Error when deleting decal: "+t+":\n"+e)}},findDecalFromWorldPosition:function(t,e){try{e(null,this._getFeatureView("Decals").findDecalFromWorldPosition(t))}catch(t){e("Error when trying to find decal:\n"+t)}},pickFromTextureCoordinates:function(t,e,o){try{var n=this._getNodeFromUserNodeID(t.instanceID);o(null,this._getFeatureView("Decals").getWorldHitFromTexCoord(n,e))}catch(t){console.log(t),o("Error when calling pickFromTextureCoordinates:\n"+t)}},_getFeatureView:function(t){if(this._partial.scene){var e=this._partial.scene.getFeatures()[t];if(e)return e._views[0]}}});const kt=Mt;var Ct=o("vENI"),Ft=o("Rxoh"),St=o("ea/9"),xt={APICore1_0:E,APICore1_2:W,APICore1_3:Y,APICore1_4:nt,APICore1_5:ct,APICore1_6:pt,APICore1_7:gt,APICore1_8:yt,APICore1_9:wt,APICore1_10:kt},It=function(t){this._definitions={},this._instance=void 0,this._instanceId=t,this._name=void 0,this._parentDomain=this.getMessageTargetDomain(document.referrer),this._defer=new n.Z};It.create=function(t,e,o,n){var a;if(e){var r=e;a=new It(t);var s=i()[e];if(!s){var u=Object.keys(i()),c=u[u.length-1];s=i()[c],console.warn("you requested api version "+e+" but this version is not available. Returned api version "+c+" instead"),r=c}var d=function(t,e){return new xt[t](e)}("APICore"+s.ApiCoreVersion,o);a.register(r,s,d)}else(a=new l).initialize(o,n),console.warn("you are using a deprecated api, please update to the new one, read mode xxxx");return a},It.prototype={ready:function(){if(window.parent){var t=(0,Ft.Z)().apiHookEnv;if(void 0!==t)if(St.Z.me().get("isStaff")){var e=new XMLHttpRequest,o=function(t){if(e.readyState===XMLHttpRequest.DONE){var o=JSON.parse(t.target.response);if(o.domain){var n=o.domain;if(n===window.location.hostname);else{var a={type:"api.ready",instanceId:this._instanceId,results:[this._instanceId],options:{domain:n}};window.parent.postMessage(a,this._parentDomain)}}}}.bind(this);e.addEventListener("load",o),e.open("GET","/i/users/viewer-api/authorized-domains?domain="+t);var n=document.cookie.match(new RegExp("sb_csrftoken=([^;]+)"));n||console.error("CRSF cookie missing");var a=n[1];e.setRequestHeader("X-CSRFToken",a),e.send()}var i={type:"api.ready",instanceId:this._instanceId,results:[this._instanceId]};(0,Ct.Z)()||(i.error="No Hardware Support for Webgl"),window.parent.postMessage(i,this._parentDomain)}},clientReady:function(){return this._defer.promise},register:function(t,e,o){this._name=t,this._members=Object.keys(e),this._membersMapping=e,this._instance=o,this.init()},getViewerAPI:function(){return this._instance},getMessageTargetDomain:function(t){if(!t||!t.length)return"*";var e=t.split("//");return e[0]+"//"+e[1].split("/")[0]},init:function(){this._defer.resolve();var t=["api.initialize","api.request"],e=Object.getPrototypeOf(this._instance);window.addEventListener("message",function(o){if((o.origin===this._parentDomain||"*"===this._parentDomain)&&o.data&&o.data.type){var n=o.data.type;if(-1!==t.indexOf(n)){var a="api.initialize"!==n;if(!a||o.data.instanceId&&o.data.instanceId===this._instanceId)try{if(a&&this._instanceId!==o.data.instanceId)throw"Invalid request : instance does not exists";if("api.request"===o.data.type){var i=this._membersMapping[o.data.member];if("-"===i&&(i=o.data.member),!i||!e[i])throw"Invalid request : member function does not exists: "+i;if("function"!=typeof e[i])throw"Invalid request : member function does not exists: "+i;for(var r=e[i],s=o.data.arguments.slice(),l=s.length-1;l>=0&&void 0===s[l];l--)s.splice(l,1);return r.length&&"function"==typeof s[r.length-1]&&(s.length=r.length-1),s.push(function(){o.source.postMessage({type:"api.request.result",instanceId:this._instanceId,requestId:o.data.requestId,results:Array.prototype.slice.call(arguments)},this._parentDomain)}.bind(this)),void r.apply(this._instance,s)}if("api.initialize"===o.data.type){if(this._name!==o.data.name)throw"No API named '"+o.data.name+"'";var u=this._members,c=this._instance;if(void 0!==c.addGlobalListener){var d=function(){var t={type:"api.event",instanceId:this._instanceId,results:Array.prototype.slice.call(arguments)};o.source.postMessage(t,this._parentDomain)}.bind(this);c.addGlobalListener(d)}return void o.source.postMessage({type:"api.initialize.result",instanceId:this._instanceId,requestId:o.data.requestId,results:[null,this._instanceId,u]},this._parentDomain)}}catch(t){console.error(t),o.source.postMessage({type:n+".result",instanceId:this._instanceId,requestId:o.data.requestId,results:[t.stack?t.stack:t]},this._parentDomain)}}}}.bind(this))}};const Lt=It},vENI:(t,e,o)=>{"use strict";o.d(e,{Z:()=>s});var n,a=o("Rxoh"),i=[{type:"VERTEX_SHADER",text:["attribute vec3 aPosition;","void main() {","gl_Position = vec4(aPosition, 1.0);","}"].join("\n")},{type:"FRAGMENT_SHADER",text:["#version 100","#ifdef GL_FRAGMENT_PRECISION_HIGH","  precision highp float;","#else"," precision mediump float;","#endif","uniform sampler2D uT0;","uniform sampler2D uT1;","uniform sampler2D uT2;","uniform sampler2D uT3;","uniform ivec4 uR;","varying vec2 vT;","varying vec3 vC;","varying vec3 vColor;","varying vec4 vColor2;","void f(in vec3 a, out vec3 b) {","b = 2.0 * a;","}","#define LIN_SRGB(x) x < 0.0031308 ? x * 12.92 : 1.055 * pow(x, 1.0/2.4) - 0.055","#define SRGB_LIN(x) x < 0.04045 ? x * (1.0 / 12.92) : pow((x + 0.055) * (1.0 / 1.055), 2.4)","float linearTosRGB(const in float color) { return LIN_SRGB(color); }","vec3 linearTosRGB(const in vec3 color) { return vec3(LIN_SRGB(color.r), LIN_SRGB(color.g), LIN_SRGB(color.b)); }","vec4 linearTosRGB(const in vec4 color) { return vec4(LIN_SRGB(color.r), LIN_SRGB(color.g), LIN_SRGB(color.b), color.a); }","void main(void) {","vec4 col;","col.r = linearTosRGB(vColor2.r);","col.rgb = linearTosRGB(vColor);","f(vC, col.xyz);","if ( uR.x == 3 ) {","  col.rgb = texture2D( uT0, vT ).aaa;","  col.a = uR.y == 0 ? texture2D( uT1, vT ).r : texture2D( uT1, vT ).a;","} else if ( uR.x == 2 ) {","  col.rgb = texture2D( uT0, vT ).rgb;","  col.a = uR.y == 0 ? texture2D( uT1, vT ).r : texture2D( uT1, vT ).a;","} else {","  col.r = uR.x == 0 ? texture2D( uT0, vT ).r : texture2D( uT0, vT ).a;","  col.g = uR.y == 0 ? texture2D( uT1, vT ).r : texture2D( uT1, vT ).a;","  col.b = uR.z == 0 ? texture2D( uT2, vT ).r : texture2D( uT2, vT ).a;","  col.a = uR.w == 0 ? texture2D( uT3, vT ).r : texture2D( uT3, vT ).a;","}","gl_FragColor = gl_FrontFacing ? vec4(col.rgb, 1.0) : col;","}"].join("\n")}];function r(t){var e=t&&t.getExtension("WEBGL_lose_context");return e&&e.loseContext(),!0}function s(){if(void 0!==window.sketchfabWebGLSupport)return window.sketchfabWebGLSupport;if(n=!1,window.sketchfabWebGLSupport=n,!window.Set||!window.Map||!window.Uint8ClampedArray)return!1;var t=null;try{var e=["webgl","experimental-webgl"],o={antialias:!1},s=document.createElement("canvas");if(!s||!s.getContext)return!1;for(var l=0;l<e.length&&!(t=s.getContext(e[l],o));l++);if(!(t&&t.getParameter&&t.getExtension&&t.getShaderPrecisionFormat))return r(t)&&!1;var u=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS);if(!u||u<64)return r(t)&&!1;var c=t.getParameter(t.MAX_VARYING_VECTORS);if(!c||c<8)return r(t)&&!1;var d=t.getExtension("WEBGL_debug_renderer_info");if(d&&"Google SwiftShader"===t.getParameter(d.UNMASKED_RENDERER_WEBGL)&&!(0,a.Z)().allowSwiftShader)return r(t)&&!1;n=i.every((function(e){return function(t,e,o){var n=e;"string"==typeof n&&(n=t[e]);var a=t.createShader(n);return t.shaderSource(a,o),t.compileShader(a),!(!t.getShaderParameter(a,t.COMPILE_STATUS)&&!t.isContextLost()&&(console.warn("Could't compile shader "+o),console.warn(t.getShaderInfoLog(a)),console.warn("You may want to consider a browser that fully supports WebGL."),1))}(t,e.type,e.text)})),r(t)}catch(e){return r(t)&&!1}return window.sketchfabWebGLSupport=n,n}},iMTj:(t,e,o)=>{"use strict";o.d(e,{Z:()=>a});var n=!1;const a=function(t){return void 0!==t&&(n=t),n}},"h+qh":(t,e,o)=>{"use strict";o.d(e,{Z:()=>h});var n=o("R4My"),a=o.n(n),i=o("1jIL"),r=o("whP6"),s=o("dP1O"),l=o("0wwR"),u=o("Rxoh"),c=o("jiVn"),d=o("Oyie"),p=function(t,e){var o=new(a().Model);return o.url=t+e,o.fetch().then((function(t){return window.prefetchedData[e]=t,t}))};const h=function(){var t=function(){if("dev"!==l.Z.buildMode){var t=!1;if(l.Z.prodHookDomainsBlacklist.forEach((function(e){document.location.href.indexOf(e)>-1&&(t=!0)})),t)return}if(-1!==window.location.search.substr(1).indexOf("hook_")){for(var e,o="hook_".length,n=window.location.search.substr(1).split(r.BJ),a=0;a<n.length;++a){var s=n[a];if(-1!==s.indexOf("hook_")){e=s.substr(o,s.indexOf("=")-o);break}}if(e&&i.ZP.bool("hook_"+e))return"https://"+("prod"===e?"sketchfab.com":"fatvoxel"===e?"fatvoxel.com":e+".fatvoxel.com")}}();if(t){var e=(0,u.Z)().model;if(e){var o=function(t,e){for(var o=["","animations","backgrounds","environments","hotspots","matcaps","sounds","textures"],n=[],a=0;a<o.length;++a){var i=(0,c.Z)(o[a],e);n.push(p(t,i))}return d.all(n).then((function(t){return new s.Z(t[0])}))}(t,e);s.Z.get=function(){return o}}}}},iUdh:(t,e,o)=>{"use strict";o.d(e,{Z:()=>i});o("ytFi");var n=o("3kmU"),a=o("av4p");const i=o("jUqp").Z.extend({displayName:"MessagePopup",optionTypes:{title:n.Z.string.isRequired,text:n.Z.string.isRequired,buttons:n.Z.shape({cancel:n.Z.bool,cancelClass:n.Z.string,cancelLabel:n.Z.string,close:n.Z.bool,closeClass:n.Z.string,closeLabel:n.Z.string,continue:n.Z.bool,continueClass:n.Z.string,continueLabel:n.Z.string,ok:n.Z.bool,okClass:n.Z.string,okLabel:n.Z.string,delete:n.Z.bool,deleteClass:n.Z.string,deleteLabel:n.Z.string}),popupClass:n.Z.string,safe:n.Z.bool,popupClosable:n.Z.bool,shouldRejectOnCancel:n.Z.bool},defaultOptions:{shouldRejectOnCancel:!0},events:{"reset form":"cancel","submit form":"continue"},template:function(){return a.Z.get("skfb_front/popups/message",{title:this.options.title,text:this.options.text,buttons:this.options.buttons,safe:this.options.safe,popupClass:this.options.popupClass,popupClosable:this.options.popupClosable})}})},K4jH:(t,e,o)=>{"use strict";o.d(e,{$u:()=>s,fN:()=>l});var n=o("1jIL"),a=o("Rxoh"),i=o("0wwR");function r(){var t;try{if(!(t=window.location!==window.parent.location?document.referrer:document.location.href))throw new Error("url is not defined")}catch(e){t=document.referrer}var e=document.createElement("a");return e.href=t,e}function s(){return r().hostname.replace(/^www\./,"")}function l(t){var e=r().host,o=!1;e===window.location.host?o=!0:i.Z.internalDomains.forEach((function(t){(e===t.domain||t.allowSubdomains&&e&&e.endsWith("."+t.domain))&&(o=!0)})),(0,a.Z)().internal&&!o?document.location.replace(n.ZP.craft("?",n.ZP.reset(window.location.search.substr(1),{internal:null}))):t()}},z3Km:(t,e,o)=>{"use strict";o.d(e,{S:()=>n});var n=function(t){var e=t.dataset.uri||"",o=new Image;o.classList.add("lazyloaded"),o.onload=o.onerror=function(){var e=t.offsetWidth,n=o.naturalWidth>e?o.naturalHeight*(e/o.naturalWidth):o.naturalHeight;e?(["transitionend","webkittransitionend","moztransitionend"].forEach((function(e){return t.addEventListener(e,(function(){return t.replaceWith(o)}))}),{once:!0}),n!==t.offsetHeight?t.style.minHeight="".concat(n,"px"):t.classList.add("loaded")):t.replaceWith(o)},o.src=e}},r3Fc:()=>{(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["skfb_front/layouts/popup.jinja"]={b_popup_header:function(t,e,o,n,a){var i="";try{o=o.push(!0),i+='\n                <div class="',i+=n.suppressValue(n.contextOrFrameLookup(e,o,"popupTitleStyle"),t.opts.autoescape),i+='">\n                    ',i+=n.suppressValue(n.contextOrFrameLookup(e,o,"popupTitle"),t.opts.autoescape),a(null,i+="\n                </div>\n            ")}catch(t){a(n.handleError(t,null,null))}},b_popup_content:function(t,e,o,n,a){var i="";try{o=o.push(!0),a(null,i+="\n            ")}catch(t){a(n.handleError(t,null,null))}},b_popup_footer:function(t,e,o,n,a){var i="";try{o=o.push(!0),a(null,i+="\n                ")}catch(t){a(n.handleError(t,null,null))}},root:function(t,e,o,n,a){var i="";try{var r,s,l,u,c,d,p,h,g,m,f,v,_,y;n.contextOrFrameLookup(e,o,"isWhiteBackground")?(i+="\n    ",r="c-popup c-popup__container",o.set("popupStyle",r,!0),o.topLevel&&e.setVariable("popupStyle",r),o.topLevel&&e.addExport("popupStyle",r),i+="\n    ",s="c-popup__header",o.set("popupHeaderStyle",s,!0),o.topLevel&&e.setVariable("popupHeaderStyle",s),o.topLevel&&e.addExport("popupHeaderStyle",s),i+="\n    ",l="c-popup__title",o.set("popupTitleStyle",l,!0),o.topLevel&&e.setVariable("popupTitleStyle",l),o.topLevel&&e.addExport("popupTitleStyle",l),i+="\n    ",u="c-popup__actions",o.set("popupActionsStyle",u,!0),o.topLevel&&e.setVariable("popupActionsStyle",u),o.topLevel&&e.addExport("popupActionsStyle",u),i+="\n    ",c="c-popup__close",o.set("popupCloseStyle",c,!0),o.topLevel&&e.setVariable("popupCloseStyle",c),o.topLevel&&e.addExport("popupCloseStyle",c),i+="\n    ",d="c-popup__content",o.set("popupContentStyle",d,!0),o.topLevel&&e.setVariable("popupContentStyle",d),o.topLevel&&e.addExport("popupContentStyle",d),i+="\n    ",p="c-popup__footer",o.set("popupFooterStyle",p,!0),o.topLevel&&e.setVariable("popupFooterStyle",p),o.topLevel&&e.addExport("popupFooterStyle",p),i+="\n"):(i+="\n    ",h="popup",o.set("popupStyle",h,!0),o.topLevel&&e.setVariable("popupStyle",h),o.topLevel&&e.addExport("popupStyle",h),i+="\n    ",g="popup-header",o.set("popupHeaderStyle",g,!0),o.topLevel&&e.setVariable("popupHeaderStyle",g),o.topLevel&&e.addExport("popupHeaderStyle",g),i+="\n    ",m="popup-title",o.set("popupTitleStyle",m,!0),o.topLevel&&e.setVariable("popupTitleStyle",m),o.topLevel&&e.addExport("popupTitleStyle",m),i+="\n    ",f="popup-actions",o.set("popupActionsStyle",f,!0),o.topLevel&&e.setVariable("popupActionsStyle",f),o.topLevel&&e.addExport("popupActionsStyle",f),i+="\n    ",v="popup-close",o.set("popupCloseStyle",v,!0),o.topLevel&&e.setVariable("popupCloseStyle",v),o.topLevel&&e.addExport("popupCloseStyle",v),i+="\n    ",_="popup-content",o.set("popupContentStyle",_,!0),o.topLevel&&e.setVariable("popupContentStyle",_),o.topLevel&&e.addExport("popupContentStyle",_),i+="\n    ",y="popup-footer",o.set("popupFooterStyle",y,!0),o.topLevel&&e.setVariable("popupFooterStyle",y),o.topLevel&&e.addExport("popupFooterStyle",y),i+="\n"),i+='\n\n<div class="popup-container',n.contextOrFrameLookup(e,o,"popupNeedsLoading")&&(i+=" popup-loading"),i+=" ",i+=n.suppressValue(n.contextOrFrameLookup(e,o,"popupClass"),t.opts.autoescape),i+='">\n    <form class="',i+=n.suppressValue(n.contextOrFrameLookup(e,o,"popupStyle"),t.opts.autoescape),i+=' js-popup" method="post"',n.contextOrFrameLookup(e,o,"allowAutocomplete")||(i+=' autocomplete="off"'),i+=" ",n.contextOrFrameLookup(e,o,"popupAction")&&(i+='action="',i+=n.suppressValue(n.contextOrFrameLookup(e,o,"popupAction"),t.opts.autoescape),i+='"'),i+=">\n\n        ",n.contextOrFrameLookup(e,o,"allowAutocomplete")||(i+="\n            ",i+='\n            <input type="text" style="display:none" />\n            <input type="password" style="display:none" />\n        '),i+='\n\n        <header class="',i+=n.suppressValue(n.contextOrFrameLookup(e,o,"popupHeaderStyle"),t.opts.autoescape),i+='">\n\n            ',e.getBlock("popup_header")(t,e,o,n,(function(r,s){r?a(r):(i+=s,i+='\n\n            <div class="',i+=n.suppressValue(n.contextOrFrameLookup(e,o,"popupActionsStyle"),t.opts.autoescape),i+='">\n                ',n.contextOrFrameLookup(e,o,"popupClosable")&&(i+='\n                    <a class="',i+=n.suppressValue(n.contextOrFrameLookup(e,o,"popupCloseStyle"),t.opts.autoescape),i+='" data-action="close" data-selenium="close-popup">\n                        <i class="fa fa-times"></i>\n                    </a>\n                '),i+='\n            </div>\n\n        </header>\n\n        <div class="',i+=n.suppressValue(n.contextOrFrameLookup(e,o,"popupContentStyle"),t.opts.autoescape),i+=" ",i+=n.suppressValue(n.contextOrFrameLookup(e,o,"popupContentClass"),t.opts.autoescape),i+='">\n            ',e.getBlock("popup_content")(t,e,o,n,(function(r,s){r?a(r):(i+=s,i+="\n        </div>\n\n        ",t.getFilter("default").call(e,n.contextOrFrameLookup(e,o,"withFooter"),!0)&&(i+='\n            <footer class="',i+=n.suppressValue(n.contextOrFrameLookup(e,o,"popupFooterStyle"),t.opts.autoescape),i+='">\n                ',e.getBlock("popup_footer")(t,e,o,n,(function(t,e){t?a(t):(i+=e,i+="\n            </footer>\n        ")}))),a(null,i+="\n\n    </form>\n\n</div>\n"))})))}))}catch(t){a(n.handleError(t,null,null))}}}},ytFi:(t,e,o)=>{o("r3Fc"),(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["skfb_front/popups/message.jinja"]={b_popup_content:function(t,e,o,n,a){var i="";try{o=o.push(!0),i+="\n\n    ",n.contextOrFrameLookup(e,o,"safe")?(i+="\n        ",i+=n.suppressValue(t.getFilter("safe").call(e,n.contextOrFrameLookup(e,o,"text")),t.opts.autoescape),i+="\n    "):(i+="\n        ",i+=n.suppressValue(n.contextOrFrameLookup(e,o,"text"),t.opts.autoescape),i+="\n    "),a(null,i+="\n\n")}catch(t){a(n.handleError(t,null,null))}},b_popup_footer:function(t,e,o,n,a){var i="";try{o=o.push(!0),i+='\n    <div class="actions">\n\n        ',i+="\n        ",i+="\n\n        ",n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"cancel")&&(i+='\n            <button class="button btn-medium btn-tertiary cancel',n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"cancelClass")&&(i+=" ",i+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"cancelClass"),t.opts.autoescape)),i+='" type="reset">',i+=n.suppressValue(t.getFilter("default").call(e,n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"cancelLabel"),"Cancel"),t.opts.autoescape),i+="</button>\n        "),i+="\n\n        ",n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"close")&&(i+='\n            <button class="button btn-medium btn-tertiary',n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"cancelClass")&&(i+=" ",i+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"closeClass"),t.opts.autoescape)),i+='" type="reset" data-action="close">',i+=n.suppressValue(t.getFilter("default").call(e,n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"closeLabel"),"Close"),t.opts.autoescape),i+="</button>\n        "),i+="\n\n        ",n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"continue")&&(i+='\n            <button class="button btn-medium btn-primary submit',n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"continueClass")&&(i+=" ",i+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"continueClass"),t.opts.autoescape)),i+='" type="submit">',i+=n.suppressValue(t.getFilter("default").call(e,n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"continueLabel"),"Continue"),t.opts.autoescape),i+="</button>\n        "),i+="\n\n        ",n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"ok")&&(i+='\n            <button class="button btn-medium btn-primary submit',n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"okClass")&&(i+=" ",i+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"okClass"),t.opts.autoescape)),i+='" type="submit">',i+=n.suppressValue(t.getFilter("default").call(e,n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"okLabel"),"OK"),t.opts.autoescape),i+="</button>\n        "),i+="\n\n        ",n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"delete")&&(i+='\n            <button class="button btn-medium btn-danger submit',n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"deleteClass")&&(i+=" ",i+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"deleteClass"),t.opts.autoescape)),i+='" type="submit">',i+=n.suppressValue(t.getFilter("default").call(e,n.memberLookup(n.contextOrFrameLookup(e,o,"buttons"),"deleteLabel"),"Delete"),t.opts.autoescape),i+="</button>\n        "),a(null,i+="\n\n    </div>\n")}catch(t){a(n.handleError(t,null,null))}},root:function(t,e,o,n,a){var i="";try{var r=null;t.getTemplate("skfb_front/layouts/popup.jinja",!0,"skfb_front/popups/message.jinja",!1,(function(s,l){if(s)a(s);else{for(var u in(r=l).blocks)e.addBlock(u,r.blocks[u]);var c,d;i+="\n\n",c=n.contextOrFrameLookup(e,o,"title"),o.set("popupTitle",c,!0),o.topLevel&&e.setVariable("popupTitle",c),o.topLevel&&e.addExport("popupTitle",c),i+="\n\n",n.contextOrFrameLookup(e,o,"popupClass")||(i+="\n    ",d="popup-message",o.set("popupClass",d,!0),o.topLevel&&e.setVariable("popupClass",d),o.topLevel&&e.addExport("popupClass",d),i+="\n"),i+="\n\n",(r?function(t,e,o,n,a){a("")}:e.getBlock("popup_content"))(t,e,o,n,(function(s,l){s?a(s):(i+=l,i+="\n\n",(r?function(t,e,o,n,a){a("")}:e.getBlock("popup_footer"))(t,e,o,n,(function(s,l){s?a(s):(i+=l,i+="\n",r?r.rootRenderFunc(t,e,o,n,a):a(null,i))})))}))}}))}catch(t){a(n.handleError(t,null,null))}}}},Jk6n:(t,e,o)=>{"use strict";o.d(e,{Z:()=>n});const n=function(t){var e=t||{};return window.location&&window.location.hash?(window.location.hash.substr(1).split(",").forEach((function(t){var o=t.split("="),n=o[0],a=o[1];if("debug3d"===n&&(e.debug3D=!0),"stats"===n&&(e.stats=!0),"inspector"===n&&(e.inspector=!0),n.match("material_"))switch(n=n.substr(9)){case"showcase":e.materialShowcase=void 0===a?e.materialShowcase:"0"!==a;break;case"names":e.materialNames=a;break;case"normal":e.materialNormal=a;break;case"emissive":e.materialEmissive=a;break;case"transparency":e.materialTransparency=a;break;case"diffuse":e.materialDiffuse=a;break;case"metalness":e.materialMetalness=a;break;case"roughness":e.materialRoughness=a;break;case"glossiness":e.materialGlossiness=a;break;case"specular":e.materialSpecular=a;break;case"cavity":e.materialCavity=a;break;case"f0":e.materialF0=a;break;case"ao":e.materialAO=a;break;case"displacement":e.materialDisplacement=a;break;case"displacement_factor":e.materialDisplacementFactor=void 0===a?e.materialDisplacementFactor:Number(a)}})),e):e}},Rxoh:(t,e,o)=>{"use strict";o.d(e,{Z:()=>f});var n,a=o("0wwR"),i=o("aStF"),r=o("9HIO"),s=o("K4jH"),l=o("iMTj"),u=o("1jIL"),c=o("Jk6n"),d=o("guhi"),p=o("jLMn"),h=o("ea/9"),g=function(t){if(null!=t)return"+Infinity"===t||"Infinity"===t?1/0:"-Infinity"===t?-1/0:t},m=function(){if(n)return n;if(window.prefetchedData.embedOptions)for(var t in n=window.prefetchedData.embedOptions)n[t]=g(n[t]);else n=function(){var t={};for(var e in r){var o=r[e],n=g(o.defaultValue),a=void 0;if(void 0!==o.alias)for(var s in o.alias)if(void 0!==(a=u.ZP[o.type](s)))break;t[(0,i.Z)(e)]=void 0!==a?a:u.ZP[o.type](e,n)}return t}();try{h.Z.me().get("isStaff")&&void 0===n.webgl2&&(n.webgl2=!0)}catch(t){console.warn("Prefetching failure while trying to reach User.me(). This is probably because this code has been run in a non web context where prefetchdata are unusable.")}if(n.apiId=u.ZP.string("api_id",void 0),n.uiInspector){var e=(0,s.$u)();n.uiInspector=-1===a.Z.inspectorBlacklist.indexOf(e)}n.annotationCycleAutostart=void 0!==n.annotationCycle,n.annotationCycleDuration=5e3,void 0!==n.annotationCycle&&(n.annotationCycleDuration=1e3*n.annotationCycle,delete n.annotationCycle),(n.cardboard||n.annotation||(0,l.Z)())&&(n.camera=!1),n.stats&&(n.continuousRender=!0),n.processOptions&&(0,d.Z)(!0),n.processOptions&&(n.processMaterial=!0),n.stats&&(n.webglTimerGpu=!1);var o=(!n.apiVersion||"1.1.0"===n.apiVersion)&&!n.materialShowcase,f=!(0,d.Z)()&&!(0,l.Z)()&&o;return void 0===n.mergeMaterials&&(n.mergeMaterials=f),void 0===n.graphOptimizer&&(n.graphOptimizer=f),void 0===n.materialPacking&&(n.materialPacking=o),void 0===n.imageCompression&&(n.imageCompression=!(0,l.Z)()),n.shadowAtlas=n.shadowAtlas&&!(0,l.Z)(),navigator&&/OculusBrowser/i.test(navigator.userAgent)&&(/Quest/i.test(navigator.userAgent)&&(n.taa=0),void 0===n.vrQuality&&(/Quest/i.test(navigator.userAgent)&&(n.vrQuality=1.5),console.log("forcing VR quality to",n.vrQuality))),void 0!==n.vrQuality&&(n.vrScaleRtt=1,n.maxDevicePixelRatio=n.vrQuality),(0,p.Z)(n.maxDevicePixelRatio),void 0===n.drsMin&&(n.drsMin=1/(0,p.Z)()),n.sssKernel%2==0&&n.sssKernel++,n.sssHalfKernel=1+(n.sssKernel>>1),(0,c.Z)(n),void 0===n.zz&&(n.zz=!(0,l.Z)()),void 0===n.forceTriangles&&(n.forceTriangles=-1!==navigator.userAgent.indexOf("Firefox/62.0")),(0,l.Z)()||m().apiVersion?n.asyncShader=!1:n.asyncShader=!0,n};const f=m},jLMn:(t,e,o)=>{"use strict";var n;o.d(e,{Z:()=>a});const a=function(t){if(n)return n;if(void 0!==t){var e=t,o=window.devicePixelRatio||1;return n=-1!==e?Math.min(e,o):o}return console.warn("getPixelRatio call before getOptions() "),1}},guhi:(t,e,o)=>{"use strict";o.d(e,{Z:()=>a});var n=!1;const a=function(t){return void 0!==t&&(n=t),n}}}]);